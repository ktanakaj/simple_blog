# Simple Blog
PHPを用いた簡易ブログです。2014年に某所でPHPでフレームワーク無しで何か作ってみて、という課題で作成。

簡易ブログということで、複数人が使うものではなく、自分のレンタルサーバー等にインストールして自分のブログ用に使う一人用のものをイメージしています。

## 機能一覧
以下の機能を含んでいます。

* 公開用画面
    * 記事一覧の表示（ページング, タグ絞り込み含む）
    * 記事の閲覧
    * Twitterタイムラインの表示（ウィジェットとして）

* 管理用画面
    * 記事一覧の表示（ページング含む）
    * 記事の作成（Twitterへの通知含む）
    * 記事の編集
    * 記事の削除
    * ブログ全体の設定
    * 認証（ベーシック認証を使用）
    * Twitter連携の有効／無効切り替え

（簡易ブログアプリとして最低限あるべきだ、と思った機能を実装。ただし、個々の機能はそれほど作り込んではいない。）

## 動作環境
動作環境はPHP 5.4とApache 2.2, MySQL 5.5で、画面表示はIE11やChromeで確認。

DBを作成した後、`app/simple_blog.sql` でテーブル等を作成して実行してください。

## ソース解説
* `app/` - アプリのルート
* `app/models/` - モデルクラス（Active Recordパターン風に1テーブル1クラスを基本としたもの）
* `app/views/` - ビューファイル（テンプレート的なPHPファイル）
* `app/views/includes/` - ビューファイルの部品
* `doc/` - ドキュメント（ツールで生成したER図含む）
* `public/` - 公開用ディレクトリ（コントローラーの機能を持たせたPHPファイル含む）
* `public/admin/` - 管理用画面のディレクトリ
* `vendor/` - Twitter API用外部ライブラリ

モデル周りをクラスとして設計しています。コントローラ周りについては、クラスにするとどこかで見たフレームワークのようになってしまいそうだったのと、規模と内容的に素のPHPでも大差なかったため、素のPHPで書いています。  
（直接SQLや$_POST等を取り扱っているため、若干見づらい。）

基本的に以下のようなMVC的な流れで処理をしています。

1. 公開用ディレクトリに置かれたPHP（コントローラ）にアクセス。
2. コントローラがGET/POSTパラメータを解析、モデルの処理を呼び出す。
3. モデルの結果をもとにコントローラがビューを出力。

管理用画面は、登録済みのID/パスワードでのみ閲覧可能となるようチェックしています。  
（初回など登録されていない場合はセットアップ画面を表示。）

一人用を想定して作成してはいますが、DB設計や管理画面などは一応どちらにも使えそうな形で作っています。

## 外部ライブラリ
Twitter連携については、TwitterOAuth を使用しています。  
`vender` 以下のソースについては `doc/LICENSE_TwitterOAuth.txt` 記載のライセンスに従ってください。

## ライセンス
[MIT](https://github.com/ktanakaj/debugform/blob/master/LICENSE)
